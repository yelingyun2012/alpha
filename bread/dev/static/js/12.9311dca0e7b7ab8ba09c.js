webpackJsonp([12],{"8M92":function(t,e,a){var n=a("S2Uj");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("1c0b34db",n,!0)},Fvmt:function(t,e,a){"use strict";function n(t){a("8M92")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("u8GW"),i=a("OjDh"),r={name:"TaskManager",data:function(){var t=this;return{activeIndex:0,pageTotal:0,pageSize:10,pageIndex:1,searchName:"",siteId:"",taskName:"",siteList:[{siteName:"全部",siteId:""}],taskColumns:[{title:"ID",width:50,align:"center",key:"taskId"},{title:"任务名称",render:function(t,e){return t("router-link",{attrs:{to:{path:"/taskManagerChild/alter",query:{checkType:""+e.row.checkType,taskId:""+e.row.taskId,updatePersonId:""+e.row.updatePersonId,status:""+e.row.status}}}},e.row.taskName)}},{title:"有效时间",width:180,render:function(t,e){if(void 0!==e.row.startTime)return e.row.startTimes.split(" ")[0]+" ~ "+e.row.endTimes.split(" ")[0]}},{title:"创建时间",width:85,align:"center",key:"createTimes"},{title:"上次运行时间",width:100,align:"center",render:function(t,e){return 0!==e.row.lastCrawlTime?t("div",[t("p",""+e.row.lastCrawlTime.split(" ")[0]),t("p",""+e.row.lastCrawlTime.split(" ")[1])]):""+e.row.lastCrawlTime}},{title:"创建人",width:70,align:"center",key:"createName"},{title:"优先级",width:60,align:"center",render:function(t,e){switch(e.row.priority){case 1:return"高";case 2:return"中";case 3:return"低"}}},{title:"签出状态",align:"center",width:150,render:function(t,e){switch(e.row.checkType){case 0:return t("span",{style:{color:"#646464",display:"inline-block",padding:"4px 10px",opacity:"0.7",background:"#EBF8F2",border:"1px solid #A7E1C4",borderRadius:"2px"}},"已签入");case 1:return t("span",{style:{color:"#646464",display:"inline-block",padding:"4px 10px",opacity:"0.7",background:"#EBF8F2",border:"1px solid #FABEB9",borderRadius:"2px"}},"已签出"+e.row.updatePersonName)}}},{title:"签出时间",width:85,align:"center",key:"updateTimes"},{title:"当前状态",width:70,align:"center",render:function(t,e){switch(e.row.status){case 0:return"停止";case 1:return"运行中";case 2:return"暂停";case 3:return"删除";case 4:return"已完成"}}},{title:"进度",render:function(t,e){return e.row.speedOfProgress>0?e.row.speedOfProgress+"%":e.row.speedOfProgress}},{title:"抽取率",width:60,align:"center",render:function(t,e){return e.row.extractionRate>0?e.row.extractionRate+"%":e.row.extractionRate}},{title:"操作",key:"operate",render:function(e,a){var n=void 0;switch(a.row.status){case 0:return n=[e("span",{on:{click:function(e){Object(s.k)({taskId:a.row.taskId,statusId:1,token:Object(i.a)("token")}).then(function(e){"0"!==e.data.respCode?t.$Message.warning(e.data.respMsg):a.row.status=1})}}},"启动"),e("span",{on:{click:function(e){Object(s.k)({taskId:a.row.taskId,statusId:3,token:Object(i.a)("token")}).then(function(e){"0"!==e.data.respCode?t.$Message.warning(e.data.respMsg):t.remove(a.index)})}}},"删除")];case 1:return n=[e("span",{on:{click:function(e){Object(s.k)({taskId:a.row.taskId,statusId:0,token:Object(i.a)("token")}).then(function(e){"0"!==e.data.respCode?t.$Message.warning(e.data.respMsg):a.row.status=0})}}},"停止"),e("span",{on:{click:function(e){Object(s.k)({taskId:a.row.taskId,statusId:2,token:Object(i.a)("token")}).then(function(e){"0"!==e.data.respCode?t.$Message.warning(e.data.respMsg):a.row.status=2})}}},"暂停"),e("span",{on:{click:function(e){Object(s.k)({taskId:a.row.taskId,statusId:3,token:Object(i.a)("token")}).then(function(e){"0"!==e.data.respCode?t.$Message.warning(e.data.respMsg):t.remove(a.index)})}}},"删除")];case 2:return n=[e("span",{on:{click:function(e){Object(s.k)({taskId:a.row.taskId,statusId:0,token:Object(i.a)("token")}).then(function(e){"0"!==e.data.respCode?t.$Message.warning(e.data.respMsg):a.row.status=0})}}},"停止"),e("span",{on:{click:function(e){Object(s.k)({taskId:a.row.taskId,statusId:1,token:Object(i.a)("token")}).then(function(e){"0"!==e.data.respCode?t.$Message.warning(e.data.respMsg):a.row.status=1})}}},"启动"),e("span",{on:{click:function(e){Object(s.k)({taskId:a.row.taskId,statusId:3,token:Object(i.a)("token")}).then(function(e){"0"!==e.data.respCode?t.$Message.warning(e.data.respMsg):t.remove(a.index)})}}},"删除")];case 4:return n=[e("span",{on:{click:function(e){Object(s.k)({taskId:a.row.taskId,statusId:1,token:Object(i.a)("token")}).then(function(e){"0"!==e.data.respCode?t.$Message.warning(e.data.respMsg):a.row.status=1})}}},"启动"),e("span",{on:{click:function(e){Object(s.k)({taskId:a.row.taskId,statusId:3,token:Object(i.a)("token")}).then(function(e){"0"!==e.data.respCode?t.$Message.warning(e.data.respMsg):t.remove(a.index)})}}},"删除")]}return e("div",n)}}],taskData:[]}},methods:{remove:function(t){this.taskData.splice(t,1)},initSite:function(){var t=this;Object(s.n)({token:Object(i.a)("token"),typeId:0}).then(function(e){t.siteList=t.siteList.concat(e.data.data)})},initTaskList:function(){var t=this;Object(s.r)({taskName:this.taskName,siteId:this.siteId,pageSize:this.pageSize,pageIndex:this.pageIndex,token:Object(i.a)("token")}).then(function(e){null!==e.data.data?(t.pageTotal=e.data.data.recordCount,t.taskData=e.data.data.result):t.taskData=[]})},handleSearch:function(){this.activeIndex=0,this.pageIndex=1,this.siteId="",this.initTaskList()},handleAdd:function(){this.$router.push("/taskManagerChild/add")},handleCut:function(t,e){this.activeIndex=t,this.siteId=e,this.initTaskList()},handlePage:function(t){this.pageIndex=t,this.initTaskList()}},created:function(){this.initSite(),this.initTaskList()}},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("aside",{staticClass:"task-name"},[a("span",{staticClass:"explain"},[t._v("任务名称 :")]),a("Input",{staticClass:"typeIn",staticStyle:{width:"20%","max-width":"300px"},attrs:{placeholder:"请输入任务名称"},model:{value:t.taskName,callback:function(e){t.taskName=e},expression:"taskName"}}),a("Button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v("查询")]),a("Button",{on:{click:t.handleAdd}},[t._v("新增")])],1),a("aside",{staticClass:"task-minute"},[a("header",{staticClass:"task-site"},[t._l(t.siteList,function(e,n){return[a("span",{key:e.number,class:{"task-site-active":t.activeIndex===n},on:{click:function(a){t.handleCut(n,e.siteId)}}},[t._v(t._s(e.siteName)),"全部"!==e.siteName?a("i",{staticStyle:{"font-style":"inherit"}},[t._v("("+t._s(e.number)+")")]):t._e()])]})],2),a("section",{staticClass:"task-mission"},[a("Table",{attrs:{columns:t.taskColumns,data:t.taskData,border:"border"}}),a("Page",{attrs:{total:t.pageTotal,current:t.pageIndex,"page-size":t.pageSize,"show-elevator":"show-elevator","show-total":"show-total"},on:{"on-change":t.handlePage}})],1)])])},c=[],d={render:o,staticRenderFns:c},u=d,l=a("VU/8"),p=n,k=l(r,u,!1,p,null,null);e.default=k.exports},S2Uj:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".ivu-table-cell{padding-right:10px;padding-left:10px}.task-name{margin-bottom:20px;padding:30px 20px;background-color:#fff}.task-name .ivu-input{height:35px}.task-name .explain{color:#323232;font-size:14px}.task-name .typeIn{margin-right:30px;margin-left:4px}.task-name .ivu-btn{padding:6px 23px}.task-name .ivu-btn-success{background-color:#17bb9c}.task-name .ivu-btn-success:hover{background-color:rgba(23,187,156,.8)}.task-name .ivu-btn:last-child{margin-left:10px;border-color:#108ee9;color:#108ee9;opacity:.9}.task-name .ivu-btn:last-child:hover{border-color:#57a3f3;color:#57a3f3}.task-minute{padding:20px;background-color:#fff}.task-site{padding-bottom:10px;border-bottom:1px dashed #b7b7b7}.task-site span{display:inline-block;padding:6px 15px;color:#589bee;font-size:14px;cursor:pointer}.task-site span.task-site-active{border-radius:4px;background-color:#2d8cf0;color:#fff}.task-mission{margin-top:20px}.task-mission .ivu-page{margin-top:20px;margin-right:20px;text-align:right}",""])}});