webpackJsonp([6,19,21],{"24dd":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"pageModelBasicOption",props:{item:Object},computed:{isFolder:function(){return this.item.children&&this.item.children.length}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pageModelBasicOption"},[a("Option",{attrs:{value:e.item.propertyId}},[e._v(e._s(e.item.propertyName))]),e._v(" "),e.isFolder?e._l(e.item.children,function(t,r){return t.children?a("pageModelBasicOption",{key:r,attrs:{item:t}},[e._v(e._s(t.propertyName))]):e._e()}):e._e()],2)},o=[],n={render:i,staticRenderFns:o},s=n,l=a("VU/8"),d=l(r,s,!1,null,null,null);t.default=d.exports},E7xd:function(e,t,a){"use strict";function r(e){a("iA+7")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),n=a("u8GW"),s=a("OjDh"),l=a("u3Vn"),d=a("24dd"),c={name:"pageModelBasic",components:{pageModelBasicTree:l.default,pageModelBasicOption:d.default},data:function(){return{modal:!1,formData:{radio:0,par:"",name:""},ruleValidate:{par:[{required:!0,message:"请选择",trigger:"change"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]},groupType:[{id:0,name:"属性"},{id:1,name:"属性组"}],items:[],postData:[]}},mounted:function(){this.httpConData()},methods:{uuid:function(){for(var e=[],t="0123456789abcdef",a=0;a<36;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},httpConData:function(){var e=this;Object(n.l)({typeId:3,token:Object(s.a)("token")}).then(function(t){if("0"===t.data.respCode){var a=t.data.data;e.$store.dispatch("setHttpCon",a)}}).catch(function(e){console.log(e.statusCode)})},addCon:function(){this.handleReset("formData"),this.modal=!0},handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=t.formData,r=t.items,i=t.uuid(),o={modelId:t.$route.query.modelId,propertyId:i,propertyName:a.name,urlPropertyExtract:0,parseType:1,matchExpression:"",groupType:a.radio,parentId:"0"};0===a.radio?"-1"===a.par?r.push(o):t.insertArr(r,a.par,o):(o.children=[],"-1"===a.par?r.push(o):t.insertArr(r,a.par,o)),t.modal=!1}else t.$Message.error("请填写!")})},insertArr:function(e,t,a){for(var r in e){if(e[r].propertyId==t){a.parentId=t,e[r].children.push(a);break}if(this.insertArr(e[r].children,t,a)){a.parentId=t,e[r].children.push(a);break}}},handleReset:function(e){this.$refs[e].resetFields()},delItem:function(e){this.items.splice(e,1)},pageModelBasicSubmit:function(){this.postData=[];var e=JSON.parse(o()(this.items));this.arrJson(e),this.deleteChildren(this.postData),this.validateCon(this.postData)},arrJson:function(e){for(var t in e)this.postData.push(e[t]),e[t].children&&this.arrJson(e[t].children)},deleteChildren:function(e){for(var t in e)e[t].sortedId=t-0+1,e[t].children&&delete e[t].children},validateCon:function(e){for(var t in e){if(""===e[t].matchExpression){this.$Message.error("页面模型内容不能为空！");this.$emit("modelErr",!1);break}if(t==e.length-1){var a=o()(this.postData);this.$emit("modelErr",!0),this.$emit("modelData",a)}}},arrFormat:function(e){for(var t in e){1===e[t].groupType&&(e[t].children=[]);for(var a in e)e[t].propertyId===e[a].parentId&&e[t].children.push(e[a])}for(var t=e.length-1;t>=0;t--)"0"!==e[t].parentId&&e.splice(t,1);this.items=e}}},p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pageModelBasic"},[0!==e.items.length?a("div",{staticClass:"pageModelTree"},e._l(e.items,function(t,r){return a("pageModelBasicTree",{key:r,attrs:{item:t},on:{remove:function(t){e.delItem(r)}}})})):e._e(),e._v(" "),a("Button",{staticStyle:{width:"60%"},attrs:{type:"dashed",icon:"plus"},on:{click:function(t){e.addCon()}}},[e._v("添加属性或属性组")]),e._v(" "),a("Modal",{attrs:{title:"属性/属性组","class-name":"vertical-center-modal"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("Form",{ref:"formData",attrs:{model:e.formData,rules:e.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:" ",prop:"radio"}},[a("RadioGroup",{model:{value:e.formData.radio,callback:function(t){e.$set(e.formData,"radio",t)},expression:"formData.radio"}},e._l(e.groupType,function(t,r){return a("Radio",{key:r,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("FormItem",{attrs:{label:"属性组名称：",prop:"par"}},[a("Select",{model:{value:e.formData.par,callback:function(t){e.$set(e.formData,"par",t)},expression:"formData.par"}},[a("Option",{attrs:{value:"-1"}},[e._v("顶级")]),e._v(" "),e._l(e.items,function(t,r){return 1===t.groupType?a("pageModelBasicOption",{key:r,attrs:{item:t}},[e._v(e._s(t.name))]):e._e()})],2)],1),e._v(" "),a("FormItem",{attrs:{label:"抽取个数：",prop:"name"}},[a("Input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("formData")}}},[e._v("确定")])],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},u=[],m={render:p,staticRenderFns:u},f=m,h=a("VU/8"),v=r,g=h(c,f,!1,v,null,null);t.default=g.exports},QezO:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"ul[data-v-5a3af434]{padding-left:20px}.w100[data-v-5a3af434]{display:inline-block;width:100px;text-align:right}",""])},"W+cS":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".pageModelBasic .pageModelTree{margin-bottom:24px;background:#f7f7f7;padding:0 20px}.pageModelBasic .pageModelTree>.pageModelBasicTree{border-bottom:1px solid #d9d9d9}.pageModelBasic .pageModelTree>.pageModelBasicTree:last-child{border:0}.pageModelBasic .pageModelTree>.pageModelBasicTree>ul{padding:0}.vertical-center-modal{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.vertical-center-modal .ivu-modal{top:0}.vertical-center-modal .ivu-modal-footer{display:none}",""])},"iA+7":function(e,t,a){var r=a("W+cS");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("6ec3f2c0",r,!0)},"iv/s":function(e,t,a){var r=a("QezO");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("62995deb",r,!0)},u3Vn:function(e,t,a){"use strict";function r(e){a("iv/s")}Object.defineProperty(t,"__esModule",{value:!0});var i={name:"pageModelBasicTree",props:{item:Object},mounted:function(){var e=this;document.addEventListener("click",function(t){e.$el.contains(t.target)||e.$store.dispatch("setToggleId","-1")})},computed:{isFolder:function(){return this.item.children&&this.item.children.length},toggleId:function(){return this.$store.getters.getToggleId},httpCon:function(){return this.$store.getters.getHttpCon}},methods:{toggle:function(e){this.$store.dispatch("setToggleId",e)},delItem:function(e){this.item.children.splice(e,1)}}},o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pageModelBasicTree"},[a("ul",[a("div",{staticStyle:{padding:"20px 0"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.toggleId!==e.item.propertyId,expression:"toggleId !== item.propertyId"}],staticClass:"w100",on:{click:function(t){t.stopPropagation(),e.toggle(e.item.propertyId)}}},[e._v(e._s(e.item.propertyName))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.toggleId===e.item.propertyId,expression:"toggleId === item.propertyId"}],on:{click:function(e){e.stopPropagation()}}},[a("Input",{staticClass:"w100",model:{value:e.item.propertyName,callback:function(t){e.$set(e.item,"propertyName",t)},expression:"item.propertyName"}})],1),e._v(" "),a("Select",{staticStyle:{width:"100px","text-align":"left"},model:{value:e.item.parseType,callback:function(t){e.$set(e.item,"parseType",t)},expression:"item.parseType"}},e._l(e.httpCon,function(t,r){return a("Option",{key:r,attrs:{value:t.itemType}},[e._v(e._s(t.itemName))])})),e._v(" "),a("Input",{staticStyle:{width:"300px"},model:{value:e.item.matchExpression,callback:function(t){e.$set(e.item,"matchExpression",t)},expression:"item.matchExpression"}}),e._v("\n      是否为URL属性：\n      "),a("RadioGroup",{model:{value:e.item.urlPropertyExtract,callback:function(t){e.$set(e.item,"urlPropertyExtract",t)},expression:"item.urlPropertyExtract"}},[a("Radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("Radio",{attrs:{label:0}},[e._v("否")])],1),e._v(" "),a("Button",{attrs:{type:"error"},on:{click:function(t){t.stopPropagation(),e.$emit("remove")}}},[e._v("删除")])],1),e._v(" "),e.isFolder?a("ul",e._l(e.item.children,function(t,r){return a("pageModelBasicTree",{key:r,attrs:{item:t},on:{remove:function(t){e.delItem(r)}}})})):e._e()])])},n=[],s={render:o,staticRenderFns:n},l=s,d=a("VU/8"),c=r,p=d(i,l,!1,c,"data-v-5a3af434",null);t.default=p.exports}});